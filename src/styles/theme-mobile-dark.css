/**
 * THEME MOBILE DARK - Pure Black (PWA Standalone)
 * S'applique automatiquement en mode app installée
 * Standard JEAN-CLAUDE: <300 lignes
 */

/* ========================================
   ACTIVATION AUTOMATIQUE MODE STANDALONE
   ======================================== */

@media (display-mode: standalone) {
  /* ========================================
     VARIABLES CSS - Utilise les variables du thème au lieu de valeurs hardcodées
     ======================================== */
  body {
    /* ✅ Garde les valeurs dark mode mais utilise les variables pour cohérence */
    --chat-bg-primary: #000000;
    --chat-bg-secondary: #0a0a0a;
    /* ⚡ CRITICAL : Utilise les variables CSS du thème au lieu de hardcoder */
    --chat-text-primary: var(--chat-text-primary, #b5bcc4); /* ✅ Variable du thème dark */
    --chat-text-secondary: var(--chat-text-secondary, #a1a9b1); /* ✅ Variable du thème dark */
    --chat-border: #1a1a1a;
    --chat-border-subtle: #0f0f0f;
  }
  
  /* ========================================
     PRESET FONT PARTOUT - Même qu'en desktop
     font-family + font-size + font-weight depuis le preset (SettingsModal)
     ======================================== */
  
  body,
  .chatgpt-container,
  .chatgpt-content,
  .chat-markdown {
    font-family: var(--font-chat-text, 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif) !important;
    font-size: var(--chat-font-size-base, 15px) !important;
    font-weight: var(--chat-weight-normal, 525) !important;
  }
  
  /* Headings - poids du preset + fallback */
  .chat-markdown h1,
  .chat-markdown h2,
  .chat-markdown h3,
  .chat-markdown h4,
  .chat-markdown h5,
  .chat-markdown h6 {
    font-family: var(--font-chat-text, 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif) !important;
  }
  .chat-markdown h1 { font-weight: var(--chat-weight-extrabold) !important; }
  .chat-markdown h2,
  .chat-markdown h3 { font-weight: var(--chat-weight-bold) !important; }
  .chat-markdown h4,
  .chat-markdown h5,
  .chat-markdown h6 { font-weight: var(--chat-weight-semibold) !important; }
  
  /* Paragraphes et listes - fallback Manrope si variables pas encore appliquées (PWA) */
  .chat-markdown p,
  .chat-markdown li:not(.task-list-item),
  .chat-markdown li > p,
  .chat-markdown div:not([class]) {
    font-family: var(--font-chat-text, 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif) !important;
    font-size: var(--chat-font-size-base, 15px) !important;
    font-weight: var(--chat-weight-normal, 525) !important;
    color: var(--chat-text-primary) !important;
  }
  
  /* Input - preset + fallback */
  .chatgpt-input-textarea,
  .textarea-with-mentions-input {
    font-family: var(--font-chat-text, 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif) !important;
    font-size: var(--chat-font-size-base, 15px) !important;
    font-weight: var(--chat-weight-normal, 525) !important;
  }
  
  /* PWA: overlay géré par chat-clean.css @media (display-mode: standalone) */
  
  /* Bulles messages - preset + fallback */
  .chatgpt-message-bubble,
  .chatgpt-message-bubble-user,
  .chatgpt-message-bubble-assistant,
  .chatgpt-message-content {
    font-family: var(--font-chat-text, 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif) !important;
    font-size: var(--chat-font-size-base, 15px) !important;
    font-weight: var(--chat-weight-normal, 525) !important;
  }
  
  /* Sidebar - preset + fallback */
  .sidebar-item-clean,
  .sidebar-session-name,
  .sidebar-user-name-clean {
    font-family: var(--font-chat-text, 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif) !important;
    font-weight: var(--chat-weight-normal, 525) !important;
  }
  
  /* Code blocks */
  .chat-markdown code,
  .chat-markdown pre {
    font-family: var(--font-monospace) !important;
  }
  
  /* ========================================
     CONTAINER PRINCIPAL
     ======================================== */
  
  .chatgpt-container {
    background: #000000 !important;
  }
  
  .chatgpt-content {
    background: #000000 !important;
  }
  
  .chatgpt-main {
    background: #000000 !important;
  }
  
  /* ========================================
     HEADER
     ======================================== */
  
  .chatgpt-header {
    background: transparent !important;
    border-bottom: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  
  /* ========================================
     MESSAGES
     ======================================== */
  
  .chatgpt-messages-container {
    background: transparent !important;
    box-shadow: none !important;
  }
  
  /* Retirer le fade/blur sous le header */
  .chatgpt-messages-container::before {
    display: none !important;
  }
  
  /* User bubbles - preset (taille/poids) comme desktop */
  .chatgpt-message-bubble-user {
    max-width: 70% !important;
    padding: 10px 14px !important;
    font-size: var(--chat-font-size-base) !important;
    font-weight: var(--chat-weight-normal) !important;
    line-height: var(--chat-line-height-normal) !important;
  }
  
  .chatgpt-message-bubble-assistant {
    background: transparent !important;
  }
  
  /* ========================================
     INPUT AREA - GARDE DÉGRADÉ GRIS EXISTANT
     ======================================== */
  
  /* Pas d'override - laisse le style glassmorphism existant */
  
  /* Retirer border-top qui crée la ligne horizontale */
  .chatgpt-input-area {
    border-top: none !important;
  }
  
  .chatgpt-main {
    border-bottom: none !important;
    background: #000000 !important; /* Noir pur pour couvrir jusqu'au bout */
  }
  
  /* Input garde son dégradé gris glassmorphism */
  
  /* ========================================
     SIDEBAR - GARDE DÉGRADÉ GRIS EXISTANT
     ======================================== */
  
  /* Pas d'override - laisse le style glassmorphism existant */
  
  /* ========================================
     BUTTONS - Utilise les variables CSS
     ======================================== */
  
  button {
    /* ⚡ CRITICAL : Utilise la variable CSS au lieu de hardcoder */
    color: var(--chat-text-primary, #b5bcc4);
  }
  
  .chatgpt-send-btn {
    background: #1a1a1a !important;
    border: 1px solid #2a2a2a;
  }
  
  .chatgpt-send-btn:hover {
    background: #2a2a2a !important;
  }
  
  /* ========================================
     SCROLLBAR
     ======================================== */
  
  ::-webkit-scrollbar {
    width: 8px;
    background: #000000;
  }
  
  ::-webkit-scrollbar-thumb {
    background: #1a1a1a;
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: #2a2a2a;
  }
}

