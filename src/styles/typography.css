/* ==========================================================================
   TYPOGRAPHIE CENTRALISÉE - ÉDITEUR
   ==========================================================================
   Système unifié pour fonts, tailles, layouts.
   Les couleurs sont gérées par src/styles/design-system.css

   POLICES DISPONIBLES DANS L'ÉDITEUR :
   - Noto Sans (par défaut) : Sans-serif moderne, très lisible
   - Inter : Sans-serif optimisé pour l'écran
   - Open Sans : Sans-serif humaniste, très lisible
   - Roboto : Sans-serif Google, excellent pour l'UI
   - Lato : Sans-serif moderne, très populaire
   - Source Sans 3 : Sans-serif Adobe, très complet
   - Work Sans : Sans-serif moderne, excellent contraste
   - EB Garamond : Serif classique, élégant
   - Cormorant Garamond : Serif moderne, très raffiné
   - Arial : Système, fallback universel
   - Palatino : Système, serif classique
   - JetBrains Mono : Monospace pour le code
*/

/* ==========================================================================
   IMPORTS GOOGLE FONTS - POLICES OPTIMISÉES POUR LA PRODUCTION
   ========================================================================== */
/* POLICES PRINCIPALES - Noto Sans + Inter + Monospace */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

/* POLICES ÉDITEUR - Options utilisateur uniquement */

:root {
  /* ==========================================================================
     COULEURS TYPOGRAPHIQUES
     ========================================================================== */
  --editor-text-color: var(--color-text-primary); /* Délégation vers variables-unified.css */
  --editor-text-primary: var(--color-text-primary); /* Délégation vers variables-unified.css */
  --editor-text-muted: var(--color-text-secondary); /* Délégation vers variables-unified.css */

  /* ==========================================================================
     FONTS HIÉRARCHISÉES - NOTO SANS + INTER + OPTIONS ÉDITEUR
     ========================================================================== */
  /* Police de base - Noto Sans partout */
  --font-base: 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;

  /* Polices éditeur - Noto Sans pour titres, Inter pour texte */
  --editor-font-family: var(--font-base);
  --editor-font-family-headings: 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  --editor-font-family-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;

  /* Polices chat - Noto Sans pour titres, Inter pour texte */
  --chat-font-family: var(--font-base);
  --chat-font-family-headings: 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;

  /* Police monospace optimisée */
  --font-monospace: 'JetBrains Mono', 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', 'Consolas', monospace;

  /* FALLBACK GLOBAL FONT - Noto Sans comme police principale */
  --font-main: var(--font-base, 'Noto Sans', sans-serif);

  /* POLICES ÉDITEUR - Options utilisateur */
  --font-open-sans: 'Open Sans', sans-serif;
  --font-roboto: 'Roboto', sans-serif;
  --font-lato: 'Lato', sans-serif;
  --font-source-sans-3: 'Source Sans 3', sans-serif;
  --font-work-sans: 'Work Sans', sans-serif;
  --font-eb-garamond: 'EB Garamond', serif;
  --font-cormorant-garamond: 'Cormorant Garamond', serif;

  /* ==========================================================================
     TAILLES HARMONISÉES - PREMIUM EDITOR (RÉDUITES DE 10%)
     ========================================================================== */
  --editor-title-size: 2.375rem;      /* 38px - taille optimisée */
  --editor-body-size: 1.125rem;         /* 18px - taille cohérente avec les paragraphes et listes */
  --editor-body-size-mobile: 1rem;      /* 16px - taille mobile cohérente */
  --editor-h1-size: 1.8rem;             /* 28.8px - réduit de 10% (32px → 28.8px) */

  /* ==========================================================================
     HAUTEURS D'IMAGE D'EN-TÊTE - COHÉRENCE GLOBALE
     ========================================================================== */
  --editor-header-image-height: 280px;    /* Hauteur standard pour toutes les images d'en-tête */
  --editor-header-image-height-mobile: 200px; /* Hauteur mobile optimisée */

  /* ==========================================================================
     FONT-WEIGHTS CENTRALISÉS - PREMIUM EDITOR
     ========================================================================== */
  --editor-title-weight: 800;         /* Poids pour les titres principaux - AUGMENTÉ */
  --editor-h1-weight: 900;            /* Poids pour H1 - ULTRA-GRAS */
  --editor-h2-weight: 900;            /* Poids pour H2 - ULTRA-GRAS */
  --editor-h3-weight: 900;            /* Poids pour H3 - ULTRA-GRAS */
  --editor-h4-weight: 800;            /* Poids pour H4 - TRÈS GRAS */
  --editor-h5-weight: 800;            /* Poids pour H5 - TRÈS GRAS */
  --editor-h6-weight: 800;            /* Poids pour H6 - TRÈS GRAS */
  --editor-body-weight: 500;          /* Poids pour le contenu principal */
  --editor-strong-weight: 700;        /* Poids pour le texte en gras */
  --editor-table-header-weight: 900;  /* Poids pour les en-têtes de tableau */
  --editor-blockquote-weight: 600;    /* Poids pour les blockquotes */
  --editor-code-weight: 500;          /* Poids pour le code inline */
  --editor-checkbox-weight: 500;      /* Poids pour les checkboxes */
  --editor-h2-size: 1.35rem;           /* 21.6px - réduit de 10% (24px → 21.6px) */
  --editor-h3-size: 1.125rem;          /* 18px - réduit de 10% (20px → 18px) */
  --editor-h4-size: 0.95625rem;        /* 15.3px - réduit de 10% (17px → 15.3px) */
  --editor-h5-size: 0.84375rem;        /* 13.5px - réduit de 10% (15px → 13.5px) */
  --editor-h6-size: 0.73125rem;        /* 11.7px - réduit de 10% (13px → 11.7px) */

  /* === TAILLES SPÉCIALISÉES - PREMIUM (RÉDUITES DE 10%) === */
  --editor-small-size: 0.73125rem;     /* 11.7px - réduit de 10% (13px → 11.7px) */
  --editor-medium-size: 0.7875rem;     /* 12.6px - réduit de 10% (14px → 12.6px) */
  --editor-large-size: 1.0125rem;      /* 16.2px - réduit de 10% (18px → 16.2px) */
  --editor-xl-size: 1.125rem;          /* 18px - réduit de 10% (20px → 18px) */
  --editor-xxl-size: 1.35rem;          /* 21.6px - réduit de 10% (24px → 21.6px) */

  /* ==========================================================================
     RESPONSIVE TAILLES - PREMIUM
     ========================================================================== */
  --editor-title-size-mobile: 1.8rem;   /* 28.8px - réduit de 10% (32px → 28.8px) */
  --editor-h1-size-mobile: 1.575rem;      /* 25.2px - réduit de 10% (28px → 25.2px) */
  --editor-h2-size-mobile: 1.2375rem;     /* 19.8px - réduit de 10% (22px → 19.8px) */
  --editor-h3-size-mobile: 1.0125rem;     /* 16.2px - réduit de 10% (18px → 16.2px) */

  /* ==========================================================================
     LARGEURS TYPOGRAPHIQUES - PREMIUM
     ========================================================================== */
  --editor-content-width-normal: 800px;   /* default normal width */
  --editor-content-width-wide: 1000px;    /* wide mode width */
  --editor-content-width: var(--editor-content-width-normal); /* Par défaut */

  /* ==========================================================================
     PADDINGS ET ESPACEMENTS TYPOGRAPHIQUES - PREMIUM
     ========================================================================== */
  --editor-title-padding: 0 0 12px 0;    /* 12px - reduced from 20px for tighter spacing */
  --editor-title-padding-wide: 0 0 6px 0; /* 6px - reduced from 12px for wide mode */
  --editor-content-padding: 6px 0 100px 0; /* 6px - reduced from 10px for tighter spacing */
  --editor-title-line-height: 1.2;        /* 1.2 - refined from 1.15 for better title spacing */
  --editor-title-letter-spacing: -0.025em; /* -0.025em - refined from -0.02em */
  --editor-title-min-height: 40px;        /* 40px - refined from 45px */

  /* ==========================================================================
     LINE-HEIGHTS ET ESPACEMENTS - BLOG PREMIUM (Optimisé 4.0)
     ========================================================================== */
  --editor-line-height-base: 1.75;       /* Line-height optimal pour la lecture longue - plus aéré */
  --editor-line-height-tight: 1.3;       /* Line-height pour les titres, plus lisible */
  --editor-line-height-mobile: 1.7;      /* Line-height mobile, légèrement plus dense */
  --editor-line-height-relaxed: 1.85;    /* Line-height pour les paragraphes importants */

  /* Rythme vertical harmonieux pour blog premium */
  --editor-paragraph-margin-bottom: 1.25em; /* Marge SOUS les paragraphes - plus compact */
  --editor-list-margin-vertical: 1.25em;    /* Marge verticale pour les listes */
  --editor-list-item-margin-vertical: 0.375em; /* Marge entre les items de liste */

  /* Espacements titres optimisés pour hiérarchie claire */
  --editor-heading-margin-top: 1.25em;      /* Marge AU-DESSUS des titres - plus compact */
  --editor-heading-margin-bottom: 0.5em;    /* Marge SOUS les titres - espacement optimal */
  --editor-heading-margin-top-first: 0;     /* Pas de marge pour le premier titre */

  /* Espacements spéciaux pour blog premium */
  --editor-section-spacing: 1.5em;          /* Espacement entre sections */
  --editor-block-spacing: 1.75em;           /* Espacement entre blocs (images, quotes, etc.) */

  /* ==========================================================================
     VARIABLES UI UNIFIÉES - POUR TOUS LES COMPOSANTS
     ========================================================================== */
  /* Tailles de police pour composants UI - centralisées et harmonisées */
  --ui-font-size-xs: 0.75rem;      /* 12px - pour les labels, badges, etc. */
  --ui-font-size-sm: 0.875rem;     /* 14px - pour le texte secondaire */
  --ui-font-size-md: 1rem;         /* 16px - pour le texte principal */
  --ui-font-size-lg: 1.125rem;     /* 18px - pour les sous-titres */
  --ui-font-size-xl: 1.125rem;      /* 18px - réduit de 10% (20px → 18px) */
  --ui-font-size-2xl: 1.35rem;      /* 21.6px - réduit de 10% (24px → 21.6px) */
  --ui-font-size-3xl: 1.6875rem;    /* 27px - réduit de 10% (30px → 27px) */
  --ui-font-size-4xl: 2.025rem;     /* 32.4px - réduit de 10% (36px → 32.4px) */

  /* Line-heights pour composants UI - optimisés pour l'interface */
  --ui-line-height-tight: 1.25;    /* Pour les titres et labels */
  --ui-line-height-normal: 1.5;    /* Pour le texte de base */
  --ui-line-height-relaxed: 1.75;  /* Pour le texte long */

  /* Espacements pour composants UI - système harmonisé */
  --ui-spacing-xs: 0.25rem;        /* 4px - espacement minimal */
  --ui-spacing-sm: 0.5rem;         /* 8px - espacement petit */
  --ui-spacing-md: 1rem;           /* 16px - espacement moyen */
  --ui-spacing-lg: 1.5rem;         /* 24px - espacement grand */
  --ui-spacing-xl: 2rem;           /* 32px - espacement très grand */
}

/* ==========================================================================
   CLASSES UTILITAIRES - HIÉRARCHISÉES
   ========================================================================== */
/* Polices principales */
.font-base { font-family: var(--font-base); }
.font-inter { font-family: var(--editor-font-family); }
.font-monospace { font-family: var(--font-monospace); }

/* Polices éditeur - options utilisateur */
.font-open-sans { font-family: var(--font-open-sans); }
.font-roboto { font-family: var(--font-roboto); }
.font-lato { font-family: var(--font-lato); }
.font-source-sans-3 { font-family: var(--font-source-sans-3); }
.font-work-sans { font-family: var(--font-work-sans); }
.font-eb-garamond { font-family: var(--font-eb-garamond); }
.font-cormorant-garamond { font-family: var(--font-cormorant-garamond); }

/* ==========================================================================
   LAYOUT TYPOGRAPHIQUE - NOTE HEADER
   ==========================================================================
   Intégré depuis NoteHeaderLayout.css
   Gestion complète du positionnement titre/contenu
*/

/* Classe de base pour le layout */
.noteLayout {
  width: 100%;
  transition: all var(--transition-normal);
  background: var(--color-bg-primary) !important; /* VARIABLE CSS - COHÉRENT */
  background-color: var(--color-bg-primary) !important;
}

/* ==========================================================================
   HEADERS - BACKGROUND COHÉRENT
   ========================================================================== */
/* Headers de l'éditeur */
.editor-header,
.noteLayout-header {
  background: var(--color-bg-header) !important; /* VARIABLE CSS - HEADER */
  background-color: var(--color-bg-header) !important;
}

/* Conteneur du titre */
.noteLayout-title {
  width: 100%;
  display: flex;
  justify-content: center;
  transition: all var(--transition-normal);
  background: var(--color-bg-primary) !important; /* VARIABLE CSS - COHÉRENT */
  background-color: var(--color-bg-primary) !important;
}

/* Conteneur du contenu */
.noteLayout-content {
  width: 100%;
  display: flex;
  justify-content: center;
  transition: all var(--transition-normal);
  background: var(--color-bg-primary) !important; /* VARIABLE CSS - COHÉRENT */
  background-color: var(--color-bg-primary) !important;
}

/* Style typographique complet du titre */
.noteLayout-title textarea {
  width: 100%;
  max-width: var(--editor-content-width);
  font-size: var(--editor-title-size);
  font-weight: 800;
  font-family: var(--editor-font-family-headings);
  color: var(--editor-text-color);
  background: none;
  border: none;
  outline: none;
  padding: var(--editor-title-padding);
  margin: 0;
  letter-spacing: var(--editor-title-letter-spacing);
  resize: none;
  overflow: visible;
  line-height: var(--editor-title-line-height);
  min-height: var(--editor-title-min-height);
  height: auto;
  transition: all var(--transition-normal);
}

/* Add editor H1 styling so typography applies when not using a textarea */
.noteLayout-title h1 {
  width: 100%;
  max-width: var(--editor-content-width);
  font-size: var(--editor-title-size);
  font-weight: 800;
  font-family: var(--editor-font-family-headings);
  color: var(--editor-text-color);
  background: none;
  border: none;
  outline: none;
  padding: var(--editor-title-padding);
  margin: 0;
  letter-spacing: var(--editor-title-letter-spacing);
  line-height: var(--editor-title-line-height);
}

/* Padding typographique du contenu */
.noteLayout-content .editor-content {
  padding: var(--editor-content-padding);
}

/* ==========================================================================
   ANCIENS ÉTATS DU LAYOUT - SUPPRIMÉS POUR ÉVITER LES CONFLITS
   ========================================================================== */
/* Ces règles sont maintenant gérées dans la section "PADDINGS SPÉCIFIQUES PAR MODE" */

/* ==========================================================================
   LAYOUT AVEC TITRE DANS L'IMAGE - POSITIONNEMENT
   ========================================================================== */
/* Positionnement absolu du titre dans l'image */
.noteLayout.imageWithTitle .noteLayout-title {
  position: absolute;
  top: 200px;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 800px;
  max-width: 800px;
  padding: 0;
  box-sizing: border-box;
  text-align: center;
  z-index: 10;
}

.noteLayout.imageWithTitle .noteLayout-title > .editor-container-width {
  width: 800px;
  max-width: 800px;
  margin: 0 auto;
}

/* Style du titre dans l'image */
.noteLayout.imageWithTitle .noteLayout-title {
  background: transparent !important;
  background-color: transparent !important;
}

.noteLayout.imageWithTitle .noteLayout-title textarea {
  color: white;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
  text-align: center;
  width: 100%;
  max-width: 800px;
  white-space: pre-wrap;
  overflow: visible;
  background: transparent !important;
  background-color: transparent !important;
}

/* Wide mode pour le titre dans l'image */
.noteLayout.imageWithTitle.wide-mode .noteLayout-title {
  width: 1000px;
  max-width: 1000px;
  background: transparent !important;
  background-color: transparent !important;
}

.noteLayout.imageWithTitle.wide-mode .noteLayout-title > .editor-container-width {
  width: 1000px;
  max-width: 1000px;
}

.noteLayout.imageWithTitle .noteLayout-content .editor-content {
  padding-top: 0;
}
.noteLayout.imageWithTitle .noteLayout-content .markdown-body {
  padding-top: 0;
}

/* ==========================================================================
   LAYOUT IMAGE SEULE - POSITIONNEMENT
   ========================================================================== */
/* Alignement à gauche pour le titre sous l'image */
.noteLayout.imageOnly .noteLayout-title {
  text-align: left;
}

.noteLayout.imageOnly .noteLayout-title > .editor-container-width {
  padding-bottom: 6px;
}

/* Responsive */
@media (max-width: 768px) {
  .noteLayout-title textarea {
    font-size: var(--editor-title-size-mobile);
  }
}

/* ==========================================================================
   WIDE MODE - PADDING OPTIMISÉ
   ========================================================================== */
/* Règles de base pour tous les layouts */
.noteLayout .noteLayout-title {
  display: flex;
  justify-content: center;
}

.noteLayout .noteLayout-content {
  margin-top: 0; /* Supprime la marge par défaut */
}

/* Standard paddings for content area - REDUITS pour le wide mode */
.noteLayout .noteLayout-content .editor-content {
  padding: 2px 0 72px 0;
}

/* ==========================================================================
   PADDINGS SPÉCIFIQUES PAR MODE - OPTIMISÉS
   ========================================================================== */

/* 1. Layout sans image - PADDING RÉDUIT */
.noteLayout.noImage .noteLayout-title {
  padding-top: 60px;
}
.noteLayout.noImage .noteLayout-title textarea {
  padding: 0 0 16px 0; /* Padding augmenté sous le titre pour le mode sans image */
}
.noteLayout.noImage .noteLayout-content .editor-content {
  padding-top: 0; /* Pas de padding en haut */
}

/* Wide mode sans image - PADDING ENCORE PLUS RÉDUIT */
.noteLayout.noImage.wide-mode .noteLayout-title textarea {
  padding: 0 0 12px 0; /* Espacement cohérent en wide mode pour le mode sans image */
}

/* 2. Layout avec titre dans l'image - PADDING MINIMAL */
.noteLayout.imageWithTitle .noteLayout-title {
  padding: 0;
}
.noteLayout.imageWithTitle .noteLayout-title textarea {
  padding: 0 0 1px 0; /* Padding minimal */
}
.noteLayout.imageWithTitle .noteLayout-content {
  margin-top: -24px;
  padding-top: 18px; /* Augmenté de 12px à 18px */
}

/* Wide mode avec titre dans l'image */
.noteLayout.imageWithTitle.wide-mode .noteLayout-title textarea {
  padding: 0 0 1px 0; /* Padding ultra-minimal */
}
.noteLayout.imageWithTitle.wide-mode .noteLayout-content {
  padding-top: 12px; /* Augmenté de 8px à 12px */
}

/* 3. Layout image seule - PADDING RÉDUIT */
.noteLayout.imageOnly .noteLayout-title {
  padding-top: 4px;
}
.noteLayout.imageOnly .noteLayout-title textarea {
  padding: 0;
}
.noteLayout.imageOnly .noteLayout-content {
  padding-top: 18px; /* Augmenté de 12px à 18px */
}

/* Wide mode image seule */
.noteLayout.imageOnly.wide-mode .noteLayout-content {
  padding-top: 12px; /* Augmenté de 8px à 12px */
}

/* ==========================================================================
   STYLES PAGE PUBLIQUE
   ==========================================================================
   Utilise les mêmes variables et logiques que l'éditeur
*/

/* ==========================================================================
   TYPOGRAPHIE RESPONSIVE DE L'ÉDITEUR - CENTRALISÉE
   ==========================================================================
   Styles migrés depuis editor-content.css pour centralisation complète
*/

/* Styles de base pour le contenu de l'éditeur */
.editor-content {
  font-family: var(--editor-font-family-body);
  font-size: var(--editor-body-size);
  line-height: var(--editor-line-height-base);
  color: var(--editor-text-color);
}

/* Styles pour les titres dans l'éditeur - REMOVED TO AVOID CONFLICTS WITH MARKDOWN.CSS */
/* .editor-content h1, h2, h3 are now handled by markdown.css with ultra-specific selectors */

/* Styles pour les paragraphes dans l'éditeur */
.editor-content p {
  margin: 0 0 var(--editor-paragraph-margin-bottom) 0;
  line-height: var(--editor-line-height-base);
  font-family: var(--editor-font-family-body);
}

/* Styles pour les listes dans l'éditeur - Blog Premium */
.editor-content ul,
.editor-content ol,
.markdown-body ul,
.markdown-body ol,
.ProseMirror ul,
.ProseMirror ol {
  margin: var(--editor-list-margin-vertical) 0; /* 1.75em */
  padding-left: 1.3em;
  font-family: var(--editor-font-family-body);
  font-size: var(--editor-body-size);     /* Utilise la variable centralisée */
  line-height: var(--editor-line-height-base); /* 1.75 */
}

.editor-content li,
.markdown-body li,
.ProseMirror li {
  margin: var(--editor-list-item-margin-vertical) 0; /* 0.5em */
  line-height: var(--editor-line-height-base); /* 1.75 */
  font-family: var(--editor-font-family-body);
  font-size: var(--editor-body-size);     /* Utilise la variable centralisée */
}

/* Sous-listes - Indentation réduite */
.editor-content ul ul,
.editor-content ul ol,
.editor-content ol ul,
.editor-content ol ol,
.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ul,
.markdown-body ol ol,
.ProseMirror ul ul,
.ProseMirror ul ol,
.ProseMirror ol ul,
.ProseMirror ol ol {
  padding-left: 1.0em; /* Indentation réduite pour les sous-listes */
}

/* ==========================================================================
   RESPONSIVE - PREMIUM TYPOGRAPHY MOBILE
   ========================================================================== */

@media (max-width: 768px) {
  .editor-content {
    font-size: var(--editor-body-size-mobile);
    line-height: var(--editor-line-height-mobile);
  }

  /* .editor-content h1, h2, h3 styles removed to avoid conflicts with markdown.css */

  /* Premium mobile spacing */
  .editor-content p,
  .markdown-body p,
  .ProseMirror p {
    margin: 0 0 1.25em 0;
    line-height: var(--editor-line-height-mobile); /* 1.65 */
    font-size: 1rem;                        /* 16px sur mobile */
  }

  .editor-content ul,
  .editor-content ol,
  .markdown-body ul,
  .markdown-body ol,
  .ProseMirror ul,
  .ProseMirror ol {
    margin: 1.25em 0;
    padding-left: 1.2em;
    font-size: 1rem;                        /* 16px sur mobile */
  }

  .editor-content li,
  .markdown-body li,
  .ProseMirror li {
    margin: 0.4em 0;
    line-height: var(--editor-line-height-mobile); /* 1.65 */
    font-size: 1rem;                        /* 16px sur mobile */
  }
}

/* ==========================================================================
   PROSEMIRROR TYPOGRAPHY - CENTRALISÉE
   ========================================================================== */

/* Styles de base pour ProseMirror */
.ProseMirror.editor-content {
  font-family: var(--editor-font-family-body);
  font-size: var(--editor-body-size);
  line-height: var(--editor-line-height-base);
  color: var(--editor-text-color);
}

/* Suppression de la marge du premier paragraphe */
.ProseMirror p:first-child {
  margin-top: 0;
}

/* ==========================================================================
   PLACEHOLDER ET ÉTATS VIDES - CENTRALISÉS
   ========================================================================== */

.editor-content .ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--text-3);
  pointer-events: none;
  height: 0;
  font-family: var(--editor-font-family-body);
  font-size: var(--editor-body-size);
  line-height: var(--editor-line-height-base);
}

/* ==========================================================================
   STYLES DE CONTENU CENTRALISÉS - FONT-WEIGHTS
   ==========================================================================
   Tous les font-weights pour le contenu des notes sont définis ici
*/

/* Paragraphes et contenu principal */
.markdown-body p,
.ProseMirror p,
.editor-content p {
  font-weight: var(--editor-body-weight);
}

/* Texte en gras */
.markdown-body strong,
.markdown-body b,
.ProseMirror strong,
.ProseMirror b,
.editor-content strong,
.editor-content b {
  font-weight: var(--editor-strong-weight);
  font-family: var(--editor-font-family-body);
}

/* Code inline */
.markdown-body code,
.ProseMirror code,
.editor-content code {
  font-weight: var(--editor-code-weight);
}

/* Blockquotes */
.markdown-body blockquote p,
.ProseMirror blockquote p,
.editor-content blockquote p {
  font-weight: var(--editor-blockquote-weight);
}

/* En-têtes de tableaux */
.markdown-body th,
.ProseMirror th,
.editor-content th {
  font-weight: var(--editor-table-header-weight);
}

/* Checkboxes */
.markdown-body input[type='checkbox']:checked::after,
.ProseMirror input[type='checkbox']:checked::after,
.editor-content input[type='checkbox']:checked::after {
  font-weight: bold;
}

/* ==========================================================================
   STYLES PAGE PUBLIQUE
   ==========================================================================
   Utilise les mêmes variables et logiques que l'éditeur
*/

/* Forcer le thème sombre sur toute la page publique */
html.public-note-page,
body.public-note-page {
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
}

/* Container principal de la page publique */
.public-note-container {
  width: 100vw;
  min-height: 100vh;
  background: var(--bg-main);
  color: var(--editor-text-color);
  padding-bottom: 64px;
}

/* Image d'en-tête publique */
.public-header-image {
  width: 100%;
  height: var(--editor-header-image-height); /* 280px - cohérent avec l'éditeur */
  overflow: hidden;
  margin-bottom: 32px;
  position: relative;
  background: var(--color-bg-header) !important; /* VARIABLE CSS - HEADER */
  background-color: var(--color-bg-header) !important;
}

.public-header-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 0;
  transition: filter 0.2s;
  background: var(--color-bg-header) !important; /* VARIABLE CSS - HEADER */
  background-color: var(--color-bg-header) !important;
}

/* Overlay de l'image d'en-tête */
.public-header-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  transition: background 0.2s;
}

/* Titre dans l'image d'en-tête */
.public-header-title {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: auto;
  max-width: 800px;
  padding: 0;
  box-sizing: border-box;
  background: transparent !important; /* TRANSPARENT POUR TITRE DANS IMAGE */
  background-color: transparent !important;
  text-align: center;
  z-index: 10;
}

/* Wrapper du contenu de la note publique */
.public-note-content-wrapper {
  max-width: var(--editor-content-width);
  width: var(--editor-content-width);
  margin: 0 auto;
}

/* Container de la TOC publique - styles de base seulement */
.public-toc-container {
  /* Position et layout gérés par public-note.css */
  z-index: 20;
}

/* ==========================================================================
   CORRECTIONS SPÉCIFIQUES PAGE PUBLIQUE
   ==========================================================================
*/

/* Titre dans la page publique (pas dans l'image) - aligné à gauche */
.public-note-content-wrapper .noteLayout-title h1 {
  text-align: left;
  margin: 0;
  padding: 0 0 4px 0; /* Même padding que l'éditeur */
  max-width: var(--editor-content-width);
  width: var(--editor-content-width);
  line-height: 1.1;
  color: var(--editor-text-color);
  font-size: var(--editor-title-size);
  font-weight: var(--editor-h1-weight);
  font-family: var(--editor-font-family-headings);
}

/* Correction des paddings pour les pages publiques - ALIGNÉS AVEC L'ÉDITEUR */
.public-note-content-wrapper .noteLayout-title {
  padding-top: 55px; /* Même padding que l'éditeur */
  margin: 0;
}

.public-note-content-wrapper .noteLayout-content {
  padding: 0;
  margin: 0;
  color: var(--editor-text-color);
}

/* Titre dans l'image d'en-tête */
.public-header-title h1 {
  color: white;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
  font-size: var(--editor-title-size);
  font-weight: var(--editor-h1-weight);
  font-family: var(--editor-font-family-headings);
  margin: 0;
  text-align: center;
  width: auto;
  max-width: 800px;
  padding: 0 0 4px 0;
  white-space: pre-wrap;
  overflow: visible;
  background: transparent !important;
  background-color: transparent !important;
}

/* Match spacing between title and text for no-image layout to image-only layout */
.noteLayout.noImage .noteLayout-title > .editor-container-width { padding-bottom: 16px; }
.noteLayout.noImage .noteLayout-title textarea { padding-bottom: 16px; }
.noteLayout.noImage .noteLayout-content { margin-top: 0; padding-top: 0; }

/* ==========================================================================
   RÈGLES POUR LA PAGE PUBLIQUE - SIMPLE ET EFFICACE
   ========================================================================== */
/* Supprimer le padding du container H1 sur la page publique */
.public-note-container .editor-container-width {
  padding-bottom: 0 !important;
}

/* ==========================================================================
   TYPOGRAPHIE DES TITRES - CENTRALISÉE ET ULTRA-SPÉCIFIQUE
   ========================================================================== */

/* H1 - Blog Premium - Titre principal */
.markdown-body h1,
.ProseMirror h1,
.editor-content h1,
.noteLayout-title h1,
.public-header-title h1,
h1 {
  font-size: 2.375rem;           /* 38px - taille optimisée */
  font-weight: 800;            /* Poids optimal pour la lisibilité */
  line-height: var(--editor-line-height-tight); /* 1.3 */
  margin: var(--editor-heading-margin-top) 0 var(--editor-heading-margin-bottom) 0; /* 2.75em 0 0.875em 0 */
  color: var(--editor-text-color);
  letter-spacing: -0.025em;    /* Légèrement plus serré */
  font-family: var(--editor-font-family-headings);
  position: relative;
  scroll-margin-top: 6rem;
}

/* Supprimer la marge du premier titre dans le contenu */
.ProseMirror > h1:first-child,
.editor-content > h1:first-child,
.markdown-body > h1:first-child {
  margin-top: var(--editor-heading-margin-top-first); /* 0 */
}

/* H2 - Blog Premium - Sous-titre principal */
.markdown-body h2,
.ProseMirror h2,
.editor-content h2,
.editor-content-wrapper h2,
.noteLayout h2,
.noteLayout-content h2,
h2 {
  font-size: 1.8rem;             /* Taille réduite de 10% pour H2 */
  font-weight: 800;            /* Plus gras pour l'impact */
  line-height: var(--editor-line-height-tight); /* 1.3 */
  margin: var(--editor-heading-margin-top) 0 var(--editor-heading-margin-bottom) 0; /* 2.75em 0 0.875em 0 */
  color: var(--editor-text-color);
  letter-spacing: -0.02em;     /* Légèrement serré */
  font-family: var(--editor-font-family-headings);
  position: relative;
  scroll-margin-top: 6rem;
}

/* Supprimer la marge du premier titre H2 dans le contenu */
.ProseMirror > h2:first-child,
.editor-content > h2:first-child,
.markdown-body > h2:first-child {
  margin-top: var(--editor-heading-margin-top-first); /* 0 */
}

/* H3 - Blog Premium - Titre de section */
.markdown-body h3,
.ProseMirror h3,
.editor-content h3,
.editor-content-wrapper h3,
.noteLayout h3,
.noteLayout-content h3,
h3 {
  font-size: 1.4625rem;         /* Taille réduite de 10% pour H3 */
  font-weight: 700;            /* Plus gras pour l'impact */
  line-height: var(--editor-line-height-tight); /* 1.3 */
  margin: var(--editor-heading-margin-top) 0 var(--editor-heading-margin-bottom) 0; /* 2.75em 0 0.875em 0 */
  color: var(--editor-text-color);
  letter-spacing: -0.015em;    /* Légèrement serré */
  font-family: var(--editor-font-family-headings);
  position: relative;
  scroll-margin-top: 6rem;
}

/* Supprimer la marge du premier titre H3 dans le contenu */
.ProseMirror > h3:first-child,
.editor-content > h3:first-child,
.markdown-body > h3:first-child {
  margin-top: var(--editor-heading-margin-top-first); /* 0 */
}

/* NEUTRALISER LES BALISES STRONG DANS LES TITRES */
/* Les titres ne doivent pas être en gras même s'ils contiennent des balises <strong> */
.markdown-body h1 strong,
.markdown-body h2 strong,
.markdown-body h3 strong,
.markdown-body h4 strong,
.markdown-body h5 strong,
.markdown-body h6 strong,
.ProseMirror h1 strong,
.ProseMirror h2 strong,
.ProseMirror h3 strong,
.ProseMirror h4 strong,
.ProseMirror h5 strong,
.ProseMirror h6 strong,
.editor-content h1 strong,
.editor-content h2 strong,
.editor-content h3 strong,
.editor-content h4 strong,
.editor-content h5 strong,
.editor-content h6 strong {
  font-weight: inherit;
}

/* H4 - Très gras partout */
.markdown-body h4,
.ProseMirror h4,
.editor-content h4,
h4 {
  font-size: 1.25rem;
  font-weight: 800;
  line-height: 1.3;
  margin: 0.875rem 0 0.4375rem 0;
  color: var(--editor-text-color);
  letter-spacing: -0.005em;
  font-family: var(--editor-font-family-headings);
  scroll-margin-top: 6rem;
}

/* Supprimer la marge du premier titre H4 dans le contenu */
.ProseMirror > h4:first-child,
.editor-content > h4:first-child,
.markdown-body > h4:first-child {
  margin-top: 0;
}

/* H5 - Gras partout */
.markdown-body h5,
.ProseMirror h5,
.editor-content h5,
h5 {
  font-size: 1.125rem;
  font-weight: 800;
  line-height: 1.35;
  margin: 0.75rem 0 0.375rem 0;
  color: var(--editor-text-color);
  font-family: var(--editor-font-family-headings);
  scroll-margin-top: 6rem;
}

/* Supprimer la marge du premier titre H5 dans le contenu */
.ProseMirror > h5:first-child,
.editor-content > h5:first-child,
.markdown-body > h5:first-child {
  margin-top: 0;
}

/* H6 - Gras partout */
.markdown-body h6,
.ProseMirror h6,
.editor-content h6,
h6 {
  font-size: 1rem;
  font-weight: 800;
  line-height: 1.4;
  margin: 0.625rem 0 0.3125rem 0;
  color: var(--editor-text-color);
  font-family: var(--editor-font-family-headings);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  scroll-margin-top: 6rem;
}

/* Supprimer la marge du premier titre H6 dans le contenu */
.ProseMirror > h6:first-child,
.editor-content > h6:first-child,
.markdown-body > h6:first-child {
  margin-top: 0;
}

/* ==========================================================================
   TYPOGRAPHIE DES PARAGRAPHES - CENTRALISÉE
   ========================================================================== */

/* Paragraphes - Blog Premium - Style optimal pour la lecture */
.markdown-body p,
.ProseMirror p,
.editor-content p,
p {
  margin: 0 0 var(--editor-paragraph-margin-bottom) 0; /* 1.75em */
  line-height: var(--editor-line-height-base); /* 1.75 */
  font-weight: var(--editor-body-weight); /* 500 */
  font-size: var(--editor-body-size); /* Utilise la variable centralisée */
  color: var(--editor-text-color);
  font-family: var(--editor-font-family-headings);
  text-align: left;
  hyphens: auto;
  word-break: break-word;
  max-width: 100%;
  text-rendering: optimizeLegibility;     /* Amélioration du rendu */
  -webkit-font-smoothing: antialiased;    /* Lissage des polices */
  -moz-osx-font-smoothing: grayscale;     /* Lissage sur macOS */
}

.markdown-body p:last-child,
.ProseMirror p:last-child,
.editor-content p:last-child,
p:last-child {
  margin-bottom: 0;
}

/* Espacement spécial après les titres - Blog Premium */
.markdown-body h1 + p,
.markdown-body h2 + p,
.markdown-body h3 + p,
.ProseMirror h1 + p,
.ProseMirror h2 + p,
.ProseMirror h3 + p,
.editor-content h1 + p,
.editor-content h2 + p,
.editor-content h3 + p {
  margin-top: 0.5rem;          /* Espacement réduit après les titres */
  line-height: var(--editor-line-height-relaxed); /* 1.85 - plus aéré */
}

/* ==========================================================================
   BLOCKQUOTES - BLOG PREMIUM
   ========================================================================== */

.markdown-body blockquote,
.ProseMirror blockquote,
.editor-content blockquote {
  margin: var(--editor-block-spacing) 0; /* 2em */
  padding: 1.5rem 2rem;
  background: rgba(255, 255, 255, 0.02);
  border-left: 4px solid var(--accent-primary, #ff6b35);
  border-radius: 0 8px 8px 0;
  font-style: italic;
  font-size: var(--editor-body-size);     /* Utilise la variable centralisée */
  line-height: var(--editor-line-height-relaxed); /* 1.8 */
  color: var(--editor-text-color);
  position: relative;
}

.markdown-body blockquote p,
.ProseMirror blockquote p,
.editor-content blockquote p {
  margin: 0;
  font-size: inherit;
  line-height: inherit;
}

/* ==========================================================================
   CODE BLOCKS & INLINE CODE - Styles now handled by unified-blocks.css
   ========================================================================== */

/*
  NOTE: Tous les styles pour les blocs de code et le code inline sont maintenant
  gérés de manière centralisée par src/styles/unified-blocks.css.
  Les anciennes règles ci-dessous ont été désactivées pour éviter les conflits
  de spécificité et assurer un design cohérent partout.
*/

/* ==========================================================================
   IMAGES - BLOG PREMIUM
   ========================================================================== */

.markdown-body img,
.ProseMirror img,
.editor-content img {
  margin: var(--editor-block-spacing) 0; /* 2em */
  max-width: 100%;
  height: auto;
  border-radius: var(--radius-md);
  box-shadow: var(--glass-shadow-soft);
}

/* ==========================================================================
   HORIZONTAL RULES - BLOG PREMIUM
   ========================================================================== */

.markdown-body hr,
.ProseMirror hr,
.editor-content hr {
  margin: var(--editor-section-spacing) 0; /* 3em */
  border: none;
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
}

/* ==========================================================================
   MERMAID DIAGRAMS - IMPORT DU FICHIER CENTRALISÉ
   ========================================================================== */
/* Les styles Mermaid sont maintenant centralisés dans src/styles/mermaid.css */