/**
 * APPROCHE SIMPLE - COPIER LES LISTES NORMALES
 * 
 * Au lieu de flexbox compliqué, on utilise le flow naturel
 * comme les listes à puces qui fonctionnent bien.
 */

/* Le UL parent - RÉDUIT pour aligner à gauche */
ul[data-type="taskList"],
.ProseMirror ul[data-type="taskList"] {
  margin: var(--editor-list-margin-vertical, 1.25rem) 0 !important;
  padding-left: 0 !important; /* ← SUPPRIMÉ pour aligner à gauche */
  line-height: var(--editor-line-height-base, 1.75) !important;
}

/* Les LI - PAS de padding pour aligner à gauche */
ul[data-type="taskList"] li,
.ProseMirror li[data-type="taskItem"],
.ProseMirror .task-list-item,
.markdown-body li:has(> input[type="checkbox"]) {
  /* Annuler le flexbox */
  display: block !important;
  
  /* Aligné à gauche comme les listes normales */
  list-style: none !important;
  padding-left: 0 !important; /* ← SUPPRIMÉ pour aligner à gauche */
  margin: var(--editor-list-item-margin-vertical, 0.375rem) 0 !important;
  line-height: var(--editor-line-height-base, 1.75) !important;
  position: relative !important;
  font-family: var(--editor-font-family-body) !important;
  font-size: var(--editor-body-size) !important;
  font-weight: var(--editor-body-weight, 500) !important;
}

/* La checkbox en position normale (flow) */
ul[data-type="taskList"] li input[type="checkbox"],
.ProseMirror li[data-type="taskItem"] input[type="checkbox"],
.ProseMirror .task-list-item input[type="checkbox"],
.markdown-body li:has(> input[type="checkbox"]) input[type="checkbox"] {
  /* Checkbox inline avec le texte */
  display: inline-block !important;
  vertical-align: -0.23em !important; /* Descend la checkbox davantage */
  margin: 0 !important;
  margin-right: 0.4em !important; /* Petit espace avec le texte */
  margin-top: 0 !important;
  width: 1.2em !important;
  height: 1.2em !important;
  flex: none !important;
  float: none !important;
  position: relative !important; /* IMPORTANT pour le ::after */
  
  /* Styles visuels de la checkbox */
  appearance: none !important;
  border: 2px solid var(--border-subtle, #666) !important;
  border-radius: 6px !important;
  background: var(--color-bg-content, #2a2a2a) !important;
  cursor: pointer !important;
}

/* La checkbox cochée */
ul[data-type="taskList"] li input[type="checkbox"]:checked,
.ProseMirror li[data-type="taskItem"] input[type="checkbox"]:checked,
.ProseMirror .task-list-item input[type="checkbox"]:checked,
.markdown-body li:has(> input[type="checkbox"]) input[type="checkbox"]:checked {
  border-color: #ff6b35 !important;
  background: #ff6b35 !important;
}

/* Le symbole ✓ - DOIT être positionné au centre de la checkbox */
ul[data-type="taskList"] li input[type="checkbox"]:checked::after,
.ProseMirror li[data-type="taskItem"] input[type="checkbox"]:checked::after,
.ProseMirror .task-list-item input[type="checkbox"]:checked::after,
.markdown-body li:has(> input[type="checkbox"]) input[type="checkbox"]:checked::after {
  content: '✓' !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  color: white !important;
  font-size: 1em !important;
  font-weight: bold !important;
  line-height: 1 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Le contenu est juste inline après */
ul[data-type="taskList"] li > *:not(input[type="checkbox"]),
.ProseMirror li[data-type="taskItem"] > *:not(input[type="checkbox"]),
.ProseMirror .task-list-item > *:not(input[type="checkbox"]),
.markdown-body li:has(> input[type="checkbox"]) > *:not(input[type="checkbox"]) {
  display: inline !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Les paragraphes inline aussi */
ul[data-type="taskList"] li p,
.ProseMirror li[data-type="taskItem"] p,
.ProseMirror .task-list-item p,
.markdown-body li:has(> input[type="checkbox"]) p {
  display: inline !important;
  margin: 0 !important;
}

/* Les divs et spans inline */
ul[data-type="taskList"] li div,
ul[data-type="taskList"] li span,
.ProseMirror li[data-type="taskItem"] div,
.ProseMirror li[data-type="taskItem"] span,
.ProseMirror .task-list-item div,
.ProseMirror .task-list-item span {
  display: inline !important;
  margin: 0 !important;
}

/* Label transparent (si présent) */
ul[data-type="taskList"] li > label,
.ProseMirror li[data-type="taskItem"] > label,
.ProseMirror .task-list-item > label {
  display: inline !important;
  margin: 0 !important;
  padding: 0 !important;
}

