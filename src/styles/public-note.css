/* ==========================================================================
   CSS PROPRE POUR PAGES PUBLIQUES - RESPECT TOTAL DE TYPOGRAPHY.CSS
   ==========================================================================
   Ce fichier contient UNIQUEMENT les styles nécessaires pour éviter le flash blanc
   et forcer le thème sombre sur la page publique.
   
   TOUS les autres styles (image, titre, overlay, etc.) sont gérés par typography.css
*/

/* ==========================================================================
   THÈME SOMBRE FORCÉ - PAGE PUBLIQUE
   ==========================================================================
   Seulement pour éviter le flash blanc, pas pour interférer avec typography.css
*/

/* ==========================================================================
   RÉDUCTION PADDING IMAGE-TITRE - PAGE PUBLIQUE
   ==========================================================================
   Réduire l'espacement entre l'image d'en-tête et le titre
*/

/* Image d'en-tête - padding réduit sur desktop */
.public-header-image {
  margin-bottom: 16px !important;
}

/* Forcer le thème sombre sur le container principal */
.public-note-container {
  background: #141414;
  background-color: #141414;
  color: #F5F5DC;
  width: 100vw;
  min-height: 100vh;
  padding-bottom: 64px;
}

/* Forcer le thème sombre sur html et body de la page publique */
html.public-note-page,
body.public-note-page {
  background: #141414;
  background-color: #141414;
  color: #F5F5DC;
}

/* ==========================================================================
   EXCEPTIONS POUR ÉLÉMENTS SPÉCIAUX
   ==========================================================================
   Ces éléments doivent garder leur apparence originale
*/

/* Badge "Crafted with Scrivia" - garder son gradient */
.public-note-container a[href*="scrivia.app"] {
  background: inherit !important;
  background-color: inherit !important;
}

/* ==========================================================================
   CORRECTION SPÉCIFIQUE DES CHECKBOXES - PAGE PUBLIQUE
   ==========================================================================
   Ces styles corrigent l'affichage des checkboxes dans les notes publiques
*/

/* Styles spécifiques pour les checkboxes dans les pages publiques */
.public-note-container .markdown-body input[type='checkbox'] {
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  width: 1.2em !important;
  height: 1.2em !important;
  border: 2px solid #444 !important;
  border-radius: 4px !important;
  background: #2a2a2a !important;
  display: inline-block !important;
  vertical-align: middle !important;
  position: relative !important;
  transition: border-color 0.18s, background 0.18s !important;
  cursor: pointer !important;
  margin-right: 0.8em !important;
  margin-top: 0 !important;
  flex-shrink: 0 !important;
}

.public-note-container .markdown-body input[type='checkbox']:checked {
  border-color: #ff6b35 !important;
  background: #ff6b35 !important;
}

.public-note-container .markdown-body input[type='checkbox']:checked::after {
  content: '✓' !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  color: white !important;
  font-size: 0.9em !important;
  font-weight: bold !important;
  line-height: 1 !important;
  text-align: center !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.public-note-container .markdown-body input[type='checkbox']:focus {
  outline: 2px solid #2994ff !important;
  outline-offset: 2px !important;
}

/* Correction des listes avec checkboxes */
.public-note-container .markdown-body li:has(> input[type="checkbox"]) {
  display: flex !important;
  align-items: center !important;
  gap: 0.5em !important;
  list-style: none !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* Contenu des éléments avec checkbox */
.public-note-container .markdown-body li:has(> input[type="checkbox"]) > *:not(input) {
  display: inline !important;
  margin: 0 !important;
}

/* Paragraphes dans les éléments avec checkbox */
.public-note-container .markdown-body li:has(> input[type="checkbox"]) p {
  display: inline !important;
  margin: 0 !important;
}

/* Alignement vertical des checkboxes */
.public-note-container .markdown-body input[type='checkbox'] {
  vertical-align: middle !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* ==========================================================================
   PADDING TITRE PAGE PUBLIQUE - DÉLÉGUÉ À TYPOGRAPHY.CSS
   ==========================================================================
   Les paddings sont maintenant gérés par typography.css avec la structure
   identique à l'éditeur (noteLayout-title + noteLayout-content)
*/

/* ==========================================================================
   RESPONSIVE DESIGN - MOBILE PREMIUM
   ==========================================================================
   Gestion responsive complète pour la page publique
*/

/* ==========================================================================
   TABLETTE (768px et moins)
   ========================================================================== */
@media (max-width: 768px) {
  /* Container principal */
  .public-note-container {
    padding-bottom: 32px;
  }

  /* Image d'en-tête - hauteur réduite */
  .public-header-image {
    height: 200px !important;
    margin-bottom: 12px;
  }

  /* Titre dans l'image - ajustements */
  .public-header-title {
    max-width: 90% !important;
    padding: 0 16px !important;
  }

  .public-header-title h1 {
    font-size: 1.75rem !important; /* Réduit pour mobile */
    padding: 0 0 6px 0 !important;
    line-height: 1.2 !important;
  }

  /* Wrapper du contenu - padding latéral - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* TOC - masquer sur mobile */
  .public-note-container .public-toc-container {
    display: none !important;
  }

  /* Contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Blocs de code - responsive */
  .public-note-content-wrapper .unified-code-block {
    margin: 16px 0 !important;
    border-radius: 8px !important;
  }

  .public-note-content-wrapper .unified-code-block pre {
    padding: 12px !important;
    font-size: 14px !important;
  }

  /* Tableaux - responsive */
  .public-note-content-wrapper table {
    font-size: 14px !important;
    margin: 16px 0 !important;
  }

  .public-note-content-wrapper th,
  .public-note-content-wrapper td {
    padding: 8px !important;
  }

  /* Blockquotes - responsive */
  .public-note-content-wrapper blockquote {
    margin: 16px 0 !important;
    padding: 12px 16px !important;
    font-size: 16px !important;
  }

  /* Mermaid - responsive */
  .public-note-content-wrapper .mermaid-container {
    margin: 16px 0 !important;
    border-radius: 8px !important;
  }

  .public-note-content-wrapper .mermaid-container svg {
    max-width: 100% !important;
    height: auto !important;
  }
}

/* ==========================================================================
   MOBILE (480px et moins)
   ========================================================================== */
@media (max-width: 480px) {
  /* Container principal */
  .public-note-container {
    padding-bottom: 24px;
  }

  /* Image d'en-tête - encore plus petite */
  .public-header-image {
    height: 150px !important;
    margin-bottom: 8px;
  }

  /* Titre dans l'image - très compact */
  .public-header-title {
    max-width: 95% !important;
    padding: 0 12px !important;
  }

  .public-header-title h1 {
    font-size: 1.5rem !important; /* Encore plus petit */
    padding: 0 0 4px 0 !important;
    line-height: 1.15 !important;
  }

  /* Wrapper du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Badge Crafted - ajustements */
  .public-note-container .crafted-badge {
    padding: 8px 12px !important;
    font-size: 12px !important;
  }

  /* Texte du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Blocs de code - plus compacts */
  .public-note-content-wrapper .unified-code-block {
    margin: 12px 0 !important;
    border-radius: 6px !important;
  }

  .public-note-content-wrapper .unified-code-block pre {
    padding: 10px !important;
    font-size: 13px !important;
  }

  /* Tableaux - plus compacts */
  .public-note-content-wrapper table {
    font-size: 13px !important;
    margin: 12px 0 !important;
  }

  .public-note-content-wrapper th,
  .public-note-content-wrapper td {
    padding: 6px !important;
  }

  /* Blockquotes - plus compacts */
  .public-note-content-wrapper blockquote {
    margin: 12px 0 !important;
    padding: 10px 12px !important;
    font-size: 15px !important;
  }

  /* Mermaid - plus compacts */
  .public-note-content-wrapper .mermaid-container {
    margin: 12px 0 !important;
    border-radius: 6px !important;
  }

  /* Headings - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */
}

/* ==========================================================================
   TRÈS PETIT MOBILE (360px et moins)
   ========================================================================== */
@media (max-width: 360px) {
  /* Wrapper du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Image d'en-tête - hauteur minimale */
  .public-header-image {
    height: 120px !important;
    margin-bottom: 6px;
  }

  /* Texte du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Blocs de code - ultra compacts */
  .public-note-content-wrapper .unified-code-block {
    margin: 10px 0 !important;
    border-radius: 4px !important;
  }

  .public-note-content-wrapper .unified-code-block pre {
    padding: 8px !important;
    font-size: 12px !important;
  }

  /* Tableaux - ultra compacts */
  .public-note-content-wrapper table {
    font-size: 12px !important;
    margin: 10px 0 !important;
  }

  .public-note-content-wrapper th,
  .public-note-content-wrapper td {
    padding: 4px !important;
  }

  /* Blockquotes - ultra compacts */
  .public-note-content-wrapper blockquote {
    margin: 10px 0 !important;
    padding: 8px 10px !important;
    font-size: 14px !important;
  }

  /* Mermaid - ultra compacts */
  .public-note-content-wrapper .mermaid-container {
    margin: 10px 0 !important;
    border-radius: 4px !important;
  }

  /* Headings - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */
}

/* ==========================================================================
   LANDSCAPE MOBILE (orientation paysage)
   ========================================================================== */
@media (max-width: 768px) and (orientation: landscape) {
  /* Image d'en-tête - hauteur réduite en paysage */
  .public-header-image {
    height: 120px !important;
    margin-bottom: 8px;
  }

  /* Titre dans l'image - ajustements paysage */
  .public-header-title h1 {
    font-size: 1.5rem !important;
    padding: 0 0 2px 0 !important;
    line-height: 1.1 !important;
  }

  /* Titre normal - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Wrapper du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Texte du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */
}

/* ==========================================================================
   LAYOUT TOC PUBLIQUE - POSITIONNEMENT À DROITE
   ==========================================================================
   Styles pour positionner la TOC à droite comme dans l'éditeur
   SANS affecter le layout du texte principal
*/

/* TOC à droite - position fixed - SEULEMENT pour les pages publiques */
.public-note-container .public-toc-container {
  position: fixed;
  top: 100px;
  right: 20px;
  width: 280px;
  height: fit-content;
  z-index: 20;
  display: block !important; /* Forcer l'affichage */
}

/* ==========================================================================
   STRUCTURE IDENTIQUE À L'ÉDITEUR - RESPECT TOTAL DE TYPOGRAPHY.CSS
   ==========================================================================
   La page publique utilise maintenant EXACTEMENT la même structure que l'éditeur
   avec noteLayout-title et noteLayout-content, donc typography.css s'applique
   automatiquement sans conflit.
*/

/* ==========================================================================
   RESPECT TOTAL DE TYPOGRAPHY.CSS
   ==========================================================================
   Aucun style pour les éléments d'image - typography.css s'en charge
   
   Les paramètres de blur, overlay, titre, etc. sont gérés par :
   1. Les styles inline du composant React
   2. Le CSS de typography.css
   3. Aucune interférence de ce fichier
*/

 