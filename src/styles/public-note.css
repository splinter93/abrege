/* ==========================================================================
   CSS PROPRE POUR PAGES PUBLIQUES - RESPECT TOTAL DE TYPOGRAPHY.CSS
   ==========================================================================
   Ce fichier contient UNIQUEMENT les styles nécessaires pour éviter le flash blanc
   et forcer le thème sombre sur la page publique.
   
   TOUS les autres styles (image, titre, overlay, etc.) sont gérés par typography.css
*/

/* ==========================================================================
   THÈME SOMBRE FORCÉ - PAGE PUBLIQUE
   ==========================================================================
   Seulement pour éviter le flash blanc, pas pour interférer avec typography.css
*/

/* ==========================================================================
   RÉDUCTION PADDING IMAGE-TITRE - PAGE PUBLIQUE
   ==========================================================================
   Réduire l'espacement entre l'image d'en-tête et le titre
*/

/* Image d'en-tête - padding réduit sur desktop */
.public-header-image {
  margin-bottom: 8px !important;
}

/* Réduction espacement titre-texte - page publique */
.public-note-container .noteLayout-title {
  padding-top: 0px !important; /* Supprime complètement le padding-top */
  padding-bottom: 0 !important; /* Supprime le padding-bottom du container */
}

.public-note-container .noteLayout-title h1 {
  padding: 0 0 15px 0 !important; /* Padding réduit en dessous pour remonter le titre */
  margin-top: 25px !important; /* Espacement final au-dessus du titre */
}

/* Réduction padding-top du contenu - page publique */
.public-note-container .noteLayout-content {
  padding-top: 0px !important; /* Supprime le padding-top */
  margin-top: -10px !important; /* Margin négatif pour remonter le texte */
}

/* Suppression padding-bottom du container editor-container-width */
.public-note-container .noteLayout-title .editor-container-width {
  padding-bottom: 0 !important; /* Supprime le padding en dessous du titre */
}

/* Forcer le thème sombre sur le container principal */
.public-note-container {
  background: #141414;
  background-color: #141414;
  color: #D4D4D4; /* Gris clair comme dans l'image */
  width: 100vw;
  min-height: 100vh;
  padding-bottom: 64px;
}

/* Forcer le thème sombre sur html et body de la page publique */
html.public-note-page,
body.public-note-page {
  background: #141414;
  background-color: #141414;
  color: #D4D4D4; /* Gris clair comme dans l'image */
}

/* ==========================================================================
   EXCEPTIONS POUR ÉLÉMENTS SPÉCIAUX
   ==========================================================================
   Ces éléments doivent garder leur apparence originale
*/

/* Badge "Crafted with Scrivia" - background gris dégradé */
.public-note-container a[href*="scrivia.app"] {
  background: linear-gradient(135deg, #4a4a4a 0%, #2a2a2a 100%) !important;
  background-color: #4a4a4a !important;
  border-radius: 16px !important;
  padding: 8px 16px !important;
  color: #f5f5dc !important;
  text-decoration: none !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  transition: all 0.2s ease !important;
}

.public-note-container a[href*="scrivia.app"]:hover {
  background: linear-gradient(135deg, #5a5a5a 0%, #3a3a3a 100%) !important;
  transform: translateY(-1px) !important;
}

/* ==========================================================================
   CORRECTION SPÉCIFIQUE DES CHECKBOXES - PAGE PUBLIQUE
   ==========================================================================
   Ces styles corrigent l'affichage des checkboxes dans les notes publiques
*/

/* Styles spécifiques pour les checkboxes dans les pages publiques */
.public-note-container .markdown-body input[type='checkbox'] {
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  width: 1.2em !important;
  height: 1.2em !important;
  border: 2px solid #444 !important;
  border-radius: 4px !important;
  background: #2a2a2a !important;
  display: inline-block !important;
  vertical-align: middle !important;
  position: relative !important;
  transition: border-color 0.18s, background 0.18s !important;
  cursor: pointer !important;
  margin-right: 0.8em !important;
  margin-top: 0 !important;
  flex-shrink: 0 !important;
}

.public-note-container .markdown-body input[type='checkbox']:checked {
  border-color: #ff6b35 !important;
  background: #ff6b35 !important;
}

.public-note-container .markdown-body input[type='checkbox']:checked::after {
  content: '✓' !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  color: white !important;
  font-size: 0.9em !important;
  font-weight: bold !important;
  line-height: 1 !important;
  text-align: center !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.public-note-container .markdown-body input[type='checkbox']:focus {
  outline: 2px solid #2994ff !important;
  outline-offset: 2px !important;
}

/* Correction des listes avec checkboxes */
.public-note-container .markdown-body li:has(> input[type="checkbox"]) {
  display: flex !important;
  align-items: center !important;
  gap: 0.5em !important;
  list-style: none !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* Contenu des éléments avec checkbox */
.public-note-container .markdown-body li:has(> input[type="checkbox"]) > *:not(input) {
  display: inline !important;
  margin: 0 !important;
}

/* Paragraphes dans les éléments avec checkbox */
.public-note-container .markdown-body li:has(> input[type="checkbox"]) p {
  display: inline !important;
  margin: 0 !important;
}

/* Alignement vertical des checkboxes */
.public-note-container .markdown-body input[type='checkbox'] {
  vertical-align: middle !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* ==========================================================================
   PADDING TITRE PAGE PUBLIQUE - DÉLÉGUÉ À TYPOGRAPHY.CSS
   ==========================================================================
   Les paddings sont maintenant gérés par typography.css avec la structure
   identique à l'éditeur (noteLayout-title + noteLayout-content)
*/

/* ==========================================================================
   RESPONSIVE DESIGN - MOBILE PREMIUM
   ==========================================================================
   Gestion responsive complète pour la page publique
*/

/* ==========================================================================
   TABLETTE (768px et moins)
   ========================================================================== */
@media (max-width: 768px) {
  /* Container principal */
  .public-note-container {
    padding-bottom: 32px;
  }

  /* Image d'en-tête - hauteur réduite */
  .public-header-image {
    height: var(--editor-header-image-height-mobile) !important; /* 200px - cohérent avec l'éditeur */
    margin-bottom: 6px;
  }

  /* Titre dans l'image - ajustements */
  .public-header-title {
    max-width: 90% !important;
    padding: 0 16px !important;
  }

  .public-header-title h1 {
    font-size: 1.575rem !important; /* Réduit de 10% pour mobile (1.75rem → 1.575rem) */
    padding: 0 0 6px 0 !important;
    line-height: 1.2 !important;
  }

  /* Wrapper du contenu - padding latéral - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* TOC - masquer sur mobile */
  .public-note-container .public-toc-container {
    display: none !important;
  }

  /* Contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Blocs de code - responsive */
  .public-note-content-wrapper .unified-code-block {
    margin: 16px 0 !important;
    border-radius: 8px !important;
  }

  .public-note-content-wrapper .unified-code-block pre {
    padding: 12px !important;
    font-size: 12.6px !important; /* Réduit de 10% (14px → 12.6px) */
  }

  /* Tableaux - responsive */
  .public-note-content-wrapper table {
    font-size: 12.6px !important; /* Réduit de 10% (14px → 12.6px) */
    margin: 16px 0 !important;
  }

  .public-note-content-wrapper th,
  .public-note-content-wrapper td {
    padding: 8px !important;
  }

  /* Blockquotes - responsive */
  .public-note-content-wrapper blockquote {
    margin: 16px 0 !important;
    padding: 12px 16px !important;
    font-size: 14.4px !important; /* Réduit de 10% (16px → 14.4px) */
  }

  /* Mermaid - responsive */
  .public-note-content-wrapper .mermaid-container {
    margin: 16px 0 !important;
    border-radius: 8px !important;
  }

  .public-note-content-wrapper .mermaid-container svg {
    max-width: 100% !important;
    height: auto !important;
  }
}

/* ==========================================================================
   MOBILE (480px et moins)
   ========================================================================== */
@media (max-width: 480px) {
  /* Container principal */
  .public-note-container {
    padding-bottom: 24px;
  }

  /* Image d'en-tête - encore plus petite */
  .public-header-image {
    height: 150px !important;
    margin-bottom: 4px;
  }

  /* Titre dans l'image - très compact */
  .public-header-title {
    max-width: 95% !important;
    padding: 0 12px !important;
  }

  .public-header-title h1 {
    font-size: 1.35rem !important; /* Réduit de 10% (1.5rem → 1.35rem) */
    padding: 0 0 4px 0 !important;
    line-height: 1.15 !important;
  }

  /* Wrapper du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Badge Crafted - ajustements */
  .public-note-container .crafted-badge {
    padding: 8px 12px !important;
    font-size: 12px !important;
  }

  /* Texte du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Blocs de code - plus compacts */
  .public-note-content-wrapper .unified-code-block {
    margin: 12px 0 !important;
    border-radius: 6px !important;
  }

  .public-note-content-wrapper .unified-code-block pre {
    padding: 10px !important;
    font-size: 11.7px !important; /* Réduit de 10% (13px → 11.7px) */
  }

  /* Tableaux - plus compacts */
  .public-note-content-wrapper table {
    font-size: 11.7px !important; /* Réduit de 10% (13px → 11.7px) */
    margin: 12px 0 !important;
  }

  .public-note-content-wrapper th,
  .public-note-content-wrapper td {
    padding: 6px !important;
  }

  /* Blockquotes - plus compacts */
  .public-note-content-wrapper blockquote {
    margin: 12px 0 !important;
    padding: 10px 12px !important;
    font-size: 13.5px !important; /* Réduit de 10% (15px → 13.5px) */
  }

  /* Mermaid - plus compacts */
  .public-note-content-wrapper .mermaid-container {
    margin: 12px 0 !important;
    border-radius: 6px !important;
  }

  /* Headings - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */
}

/* ==========================================================================
   TRÈS PETIT MOBILE (360px et moins)
   ========================================================================== */
@media (max-width: 360px) {
  /* Wrapper du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Image d'en-tête - hauteur minimale */
  .public-header-image {
    height: 120px !important;
    margin-bottom: 3px;
  }

  /* Texte du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Blocs de code - ultra compacts */
  .public-note-content-wrapper .unified-code-block {
    margin: 10px 0 !important;
    border-radius: 4px !important;
  }

  .public-note-content-wrapper .unified-code-block pre {
    padding: 8px !important;
    font-size: 10.8px !important; /* Réduit de 10% (12px → 10.8px) */
  }

  /* Tableaux - ultra compacts */
  .public-note-content-wrapper table {
    font-size: 10.8px !important; /* Réduit de 10% (12px → 10.8px) */
    margin: 10px 0 !important;
  }

  .public-note-content-wrapper th,
  .public-note-content-wrapper td {
    padding: 4px !important;
  }

  /* Blockquotes - ultra compacts */
  .public-note-content-wrapper blockquote {
    margin: 10px 0 !important;
    padding: 8px 10px !important;
    font-size: 12.6px !important; /* Réduit de 10% (14px → 12.6px) */
  }

  /* Mermaid - ultra compacts */
  .public-note-content-wrapper .mermaid-container {
    margin: 10px 0 !important;
    border-radius: 4px !important;
  }

  /* Headings - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */
}

/* ==========================================================================
   LANDSCAPE MOBILE (orientation paysage)
   ========================================================================== */
@media (max-width: 768px) and (orientation: landscape) {
  /* Image d'en-tête - hauteur réduite en paysage */
  .public-header-image {
    height: 120px !important;
    margin-bottom: 4px;
  }

  /* Titre dans l'image - ajustements paysage */
  .public-header-title h1 {
    font-size: 1.35rem !important; /* Réduit de 10% (1.5rem → 1.35rem) */
    padding: 0 0 2px 0 !important;
    line-height: 1.1 !important;
  }

  /* Titre normal - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Wrapper du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */

  /* Texte du contenu - DÉLÉGUÉ À TYPOGRAPHY.CSS */
  /* Les styles responsive sont maintenant gérés par typography.css */
}

/* ==========================================================================
   LAYOUT TOC PUBLIQUE - POSITIONNEMENT À DROITE
   ==========================================================================
   Styles pour positionner la TOC à droite comme dans l'éditeur
   SANS affecter le layout du texte principal
*/

/* TOC à droite - position fixed - SEULEMENT pour les pages publiques */
.public-note-container .public-toc-container {
  position: fixed;
  top: 100px;
  right: 20px;
  width: 280px;
  height: fit-content;
  z-index: 20;
  display: block !important; /* Forcer l'affichage */
}

/* ==========================================================================
   STRUCTURE IDENTIQUE À L'ÉDITEUR - RESPECT TOTAL DE TYPOGRAPHY.CSS
   ==========================================================================
   La page publique utilise maintenant EXACTEMENT la même structure que l'éditeur
   avec noteLayout-title et noteLayout-content, donc typography.css s'applique
   automatiquement sans conflit.
*/

/* ==========================================================================
   SUPPRESSION OUTLINES ORANGE - TITRES PAGE PUBLIQUE
   ==========================================================================
   Supprimer les encadrés orange qui apparaissent au clic sur les titres
*/

/* Supprimer les outlines orange sur tous les éléments focus de la page publique */
.public-note-container *:focus {
  outline: none !important;
  box-shadow: none !important;
}

/* Supprimer spécifiquement les outlines sur les titres */
.public-note-container h1:focus,
.public-note-container h2:focus,
.public-note-container h3:focus,
.public-note-container h4:focus,
.public-note-container h5:focus,
.public-note-container h6:focus {
  outline: none !important;
  box-shadow: none !important;
}

/* S'assurer que les titres utilisent la bonne police */
.public-note-container h1,
.public-note-container h2,
.public-note-container h3,
.public-note-container h4,
.public-note-container h5,
.public-note-container h6,
.public-note-container .markdown-body h1,
.public-note-container .markdown-body h2,
.public-note-container .markdown-body h3,
.public-note-container .markdown-body h4,
.public-note-container .markdown-body h5,
.public-note-container .markdown-body h6 {
  font-family: var(--editor-font-family-headings) !important;
}

/* S'assurer que le texte utilise la bonne police */
.public-note-container p,
.public-note-container .markdown-body p,
.public-note-container .markdown-body li,
.public-note-container .markdown-body,
.public-note-container .noteLayout-content p,
.public-note-container .noteLayout-content li {
  font-family: var(--editor-font-family-body) !important;
}

/* ==========================================================================
   FONT-WEIGHT TEXTE - COHÉRENCE AVEC L'ÉDITEUR
   ==========================================================================
   Appliquer le même poids de texte que dans l'éditeur (500)
*/

/* Paragraphes et texte principal */
.public-note-container p,
.public-note-container .markdown-body p,
.public-note-container .noteLayout-content p {
  font-weight: 500 !important;
}

/* Listes */
.public-note-container li,
.public-note-container .markdown-body li,
.public-note-container .noteLayout-content li {
  font-weight: 500 !important;
}

/* Texte général du contenu */
.public-note-container .markdown-body,
.public-note-container .noteLayout-content {
  font-weight: 500 !important;
}

/* ==========================================================================
   RESPECT TOTAL DE TYPOGRAPHY.CSS
   ==========================================================================
   Aucun style pour les éléments d'image - typography.css s'en charge
   
   Les paramètres de blur, overlay, titre, etc. sont gérés par :
   1. Les styles inline du composant React
   2. Le CSS de typography.css
   3. Aucune interférence de ce fichier
*/

/* ==========================================================================
   MERMAID DIAGRAMS - RADIUS POUR PAGES PUBLIQUES
   ========================================================================== */

/* Styles spécifiques pour les diagrammes Mermaid sur les pages publiques */
/* Ces styles s'appliquent aux SVG Mermaid dans le contenu public */

/* Appliquer un radius à tous les éléments rect dans les SVG Mermaid */
.public-note-content svg rect {
  rx: 8px !important;
  ry: 8px !important;
}

/* Styles spécifiques par type de diagramme pour les pages publiques */

/* Flowchart - nœuds */
.public-note-content svg .node rect,
.public-note-content svg .node polygon,
.public-note-content svg .flowchart-node rect,
.public-note-content svg .flowchart-node polygon {
  rx: 8px !important;
  ry: 8px !important;
}

/* Sequence Diagram - acteurs et boîtes */
.public-note-content svg .actor rect,
.public-note-content svg .actor polygon,
.public-note-content svg .messageLine0,
.public-note-content svg .messageLine1,
.public-note-content svg .messageText rect {
  rx: 6px !important;
  ry: 6px !important;
}

/* Class Diagram - classes et interfaces */
.public-note-content svg .class rect,
.public-note-content svg .class polygon,
.public-note-content svg .classBox rect {
  rx: 8px !important;
  ry: 8px !important;
}

/* State Diagram - états */
.public-note-content svg .state rect,
.public-note-content svg .state polygon,
.public-note-content svg .state-node rect {
  rx: 12px !important;
  ry: 12px !important;
}

/* Entity Relationship - entités */
.public-note-content svg .entity rect,
.public-note-content svg .entity polygon {
  rx: 8px !important;
  ry: 8px !important;
}

/* Gantt - barres de tâches */
.public-note-content svg .task rect,
.public-note-content svg .taskText rect {
  rx: 4px !important;
  ry: 4px !important;
}

/* Journey - étapes */
.public-note-content svg .journey-step rect,
.public-note-content svg .journey-step polygon {
  rx: 10px !important;
  ry: 10px !important;
}

/* Git Graph - commits */
.public-note-content svg .commit rect,
.public-note-content svg .commit polygon {
  rx: 6px !important;
  ry: 6px !important;
}

/* Pie Chart - titres */
.public-note-content svg .pieTitleText rect {
  rx: 6px !important;
  ry: 6px !important;
}

/* Clusters et groupes */
.public-note-content svg .cluster rect,
.public-note-content svg .cluster polygon {
  rx: 12px !important;
  ry: 12px !important;
}

/* Notes et annotations */
.public-note-content svg .note rect,
.public-note-content svg .note polygon,
.public-note-content svg .noteText rect {
  rx: 6px !important;
  ry: 6px !important;
}

/* Labels et textes dans des boîtes */
.public-note-content svg .label rect,
.public-note-content svg .label polygon {
  rx: 4px !important;
  ry: 4px !important;
}

/* Éléments de contrôle et boutons */
.public-note-content svg .control rect,
.public-note-content svg .control polygon {
  rx: 6px !important;
  ry: 6px !important;
}

/* Styles pour les éléments avec des classes spécifiques */
.public-note-content svg .rounded rect,
.public-note-content svg .rounded polygon {
  rx: 12px !important;
  ry: 12px !important;
}

/* Assurer que tous les éléments rect ont un radius par défaut */
.public-note-content svg rect:not([rx]):not([ry]) {
  rx: 8px !important;
  ry: 8px !important;
}

 